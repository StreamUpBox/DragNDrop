
<form  *ngFor="let stk of stocks; let i = index;" style="height: 100%;">
    <table style="width: 100%;">

        <tr class="tr" [class.trIsFocused]="isFocused==stk.id" style="border-top: 1px #d5d9dc solid; border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">
            <td style="width:100%;" colspan="3"><span style="font-size: 14px;padding: 12px 16px;font-weight: 500;">Available at {{stock.findBranch(stk.branchId).name}}</span></td> 
        </tr>

        <tr class="tr" [class.trIsFocused]="isFocused==stk.id+'reason' && stk.canTrackingStock"  style=" border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">
            
          <td class="td"  [class.tdIsFocused]="isFocused==stk.id+'reason' && stk.canTrackingStock">
              Stock Action
            </td>
            <td style="width:60%" colspan="2">
              <mat-select class="select"  placeholder="Select Reason"  [disabled]="!stk.canTrackingStock"
              (selectionChange)="updateReason(stk,$event)" (focus)="focusing(stk.id+'reason')" (focusout)="focusingOut()">
              <mat-option *ngFor="let reason of stock.reasons" [value]="reason.value">
                {{reason.name}}
              </mat-option>
            </mat-select>


            </td>
            
       </tr>

        <tr class="tr" [class.trIsFocused]="isFocused==stk.id+'current' && stk.canTrackingStock"  style=" border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">
            
            <td class="td"  [class.tdIsFocused]="isFocused==stk.id+'current' && stk.canTrackingStock">
                Current Stock
              </td>
              <td style="width:40%">
                <input class="input"  type="text" (input)="updateCurrentStock(stk,$event)"
                (focus)="focusing(stk.id+'current')" [disabled]="!stk.canTrackingStock" (focusout)="focusingOut()" [value]="stk.currentStock" placeholder="current Stock" />
              </td>
              <td style="width:20%">
                <mat-slide-toggle [(ngModel)]="stk.canTrackingStock" name="stk.id+'current'"  (click)="toggled(stk,'canTrackingStock',stk.canTrackingStock)" style="margin-top: 12px;margin-left: 10px;">Tracking</mat-slide-toggle>
            </td>
         </tr>

         <tr class="tr" [class.trIsFocused]="isFocused==stk.id+'low' && stk.showlowStockAlert" style=" border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">
            
            <td class="td"  [class.tdIsFocused]="isFocused==stk.id+'low' && stk.showlowStockAlert">
                Low Stock Alert
              </td>
              <td style="width:40%">
                <input class="input"  type="text" [value]="stk.lowStock" (input)="updateLowStock(stk,'lowStock',$event)"
                (focus)="focusing(stk.id+'low')" [disabled]="!stk.showlowStockAlert" (focusout)="focusingOut()" placeholder="low Stock" />
              </td>
              <td style="width:20%">
                <mat-slide-toggle [(ngModel)]="stk.showlowStockAlert" name="stk.id+'low'" (click)="toggled(stk,'showlowStockAlert',stk.showlowStockAlert)" style="margin-top: 12px;margin-left: 10px;">Alerts</mat-slide-toggle>
              </td>
         </tr>

      
       
      </table>
      <br /><br />
      

</form>


