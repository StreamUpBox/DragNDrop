<h1 mat-dialog-title>Add variation</h1>
<form [formGroup]="form" (ngSubmit)="onSubmit()" style="height: 100%;">

<div mat-dialog-content>

    <table style="width: 100%;" class="mt-4">

        <tr class="tr" [class.trIsFocused]="isFocused=='name'" [class.invalid]="submitted && formControl.name.errors" style="border-top: 1px #d5d9dc solid; border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">
            
            <td class="td"  [class.tdIsFocused]="isFocused=='name'" >
                Variation Name
              </td>
              <td style="width:60%">
                <input class="input" formControlName="name" type="text"
                (focus)="focusing('name')" (focusout)="focusingOut()" placeholder="Variation Name" />
               
              </td>
         </tr>

         <tr class="tr" [class.trIsFocused]="isFocused=='SKU'" style=" border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">
            
            <td class="td"  [class.tdIsFocused]="isFocused=='SKU'">
                SKU
              </td>
              <td style="width:60%">
                <input class="input" formControlName="SKU" type="text"
                (focus)="focusing('SKU')" (focusout)="focusingOut()" placeholder="SKU" />
              </td>
         </tr>

         <tr class="tr" [class.trIsFocused]="isFocused=='unit'" style=" border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">
            <td class="td"  [class.tdIsFocused]="isFocused=='unit'">
              Unit Type
            </td>
            <td style="width:60%">
                <mat-select class="select" formControlName="unit" placeholder="Choose Unit Type"
               (focus)="focusing('unit')"  (focusout)="focusingOut()">
                        <mat-option *ngFor="let unit of variant.units" [value]="unit.value">
                        {{unit.name}}
                        </mat-option>
              </mat-select>
            </td>
           
          </tr>
      
        <tr class="tr" [class.trIsFocused]="isFocused=='retailPrice'" [class.invalid]="submitted && formControl.retailPrice.errors" style=" border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">
          <td class="td"  [class.tdIsFocused]="isFocused=='retailPrice'">
            Retail Price
          </td>
          <td style="width:60%">
           <div class="price">

            <span class="currency">{{variant.activeBusiness().currency}} {{form.value.unit?'/ '+form.value.unit:''}}</span>
            <span class="pinput">
            <input class="input" formControlName="retailPrice" type="number"
            (focus)="focusing('retailPrice')" (focusout)="focusingOut()" placeholder="retail Price" />
           
            </span>
           </div>
          </td>
        </tr>

        <tr class="tr" [class.trIsFocused]="isFocused=='supplyPrice'" [class.invalid]="submitted && formControl.supplyPrice.errors" style=" border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">
          <td class="td" [class.tdIsFocused]="isFocused=='supplyPrice'">
            Supply Price
          </td>
          <td style="width:60%">
            <div class="price">

                <span class="currency">{{variant.activeBusiness().currency}} {{form.value.unit?'/ '+form.value.unit:''}}</span>
                <span class="pinput">
                <input class="input" formControlName="supplyPrice" type="number"
                (focus)="focusing('supplyPrice')" (focusout)="focusingOut()" placeholder="supply Price" />
              
                </span>
               </div>
          </td>
        </tr>
    
      </table>
      <mat-error *ngIf="submitted && formControl.name.errors">
        <div *ngIf="formControl.name.errors.required">Variation name is required</div>
        </mat-error>
      <mat-error *ngIf="submitted && formControl.supplyPrice.errors">
        <div *ngIf="formControl.supplyPrice.errors.min">Supply Price - Negative number is not allowed!</div>
      </mat-error>
     
      <mat-error *ngIf="submitted && formControl.retailPrice.errors">
      <div *ngIf="formControl.retailPrice.errors.min">Retail Price - Negative number is not allowed!</div>
      </mat-error>
</div>


<div mat-dialog-actions style="float: right;">
    <button mat-button (click)="dialogRef.close()"  cdkFocusInitial>Cancel</button>
  <button mat-button type="submit" color="primary" cdkFocusInitial>Save</button>
</div>

</form>

